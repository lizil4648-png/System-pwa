<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–°–∏—Å—Ç–µ–º–∞</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0d0d1a;
      color: #fff;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    header {
      background: #1a1a33;
      padding: 10px;
    }
    header button {
      margin: 5px;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      background: #6a5acd;
      color: white;
      cursor: pointer;
      font-weight: bold;
    }
    .page {
      display: none;
      padding: 20px;
    }
    .active {
      display: block;
    }
    .quest-box {
      border: 1px solid #6a5acd;
      padding: 15px;
      margin: 15px auto;
      width: 70%;
      border-radius: 10px;
      background: rgba(106, 90, 205, 0.1);
    }
    .title {
      font-size: 1.5em;
      margin-bottom: 15px;
    }
    .xp-bar {
      background:#444; 
      border-radius:10px; 
      width:80%; 
      height:20px; 
      margin: 10px auto;
    }
    .xp-fill {
      background:#6a5acd; 
      width:0%; 
      height:100%; 
      border-radius:10px;
      transition: width 0.5s;
    }
  </style>
</head>
<body>
  <header>
    <button onclick="showPage('stats')">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
    <button onclick="showPage('skills')">üìò –ù–∞–≤—ã–∫–∏</button>
    <button onclick="showPage('quests')">üéØ –ó–∞–¥–∞–Ω–∏—è</button>
  </header>

  <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
  <section id="stats" class="page active">
    <h2 class="title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
    <p><b>–£—Ä–æ–≤–µ–Ω—å:</b> <span id="level">1</span></p>
    <p><b>–û–ø—ã—Ç:</b> <span id="xp">0</span>/<span id="xpNeeded">50</span></p>

    <div class="xp-bar">
      <div id="xp-bar" class="xp-fill"></div>
    </div>

    <h3>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
    <p>‚öîÔ∏è –°–∏–ª–∞: <span id="strength">5</span></p>
    <p>üèÉ –õ–æ–≤–∫–æ—Å—Ç—å: <span id="agility">5</span></p>
    <p>üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: <span id="intelligence">5</span></p>
    <p>‚ù§Ô∏è –ñ–∏–≤—É—á–µ—Å—Ç—å: <span id="vitality">5</span></p>
  </section>

  <!-- –ù–∞–≤—ã–∫–∏ -->
  <section id="skills" class="page">
    <h2 class="title">–ù–∞–≤—ã–∫–∏</h2>
    <ul id="skills-list">
      <li>–ü—Ä–∏–º–µ—Ä –Ω–∞–≤—ã–∫–∞: –ú–µ–¥–∏—Ç–∞—Ü–∏—è</li>
    </ul>
  </section>

  <!-- –ó–∞–¥–∞–Ω–∏—è -->
  <section id="quests" class="page">
    <h2 class="title">–ó–∞–¥–∞–Ω–∏—è</h2>
    <div id="daily-quest" class="quest-box"></div>
    <button id="complete-btn" onclick="completeQuest()">–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
  </section>

  <script>
    // ====== –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ======
    let level = parseInt(localStorage.getItem("level")) || 1;
    let xp = parseInt(localStorage.getItem("xp")) || 0;
    let stats = JSON.parse(localStorage.getItem("stats")) || {
      strength: 5,
      agility: 5,
      intelligence: 5,
      vitality: 5
    };

    let skillsQueue = JSON.parse(localStorage.getItem("skillsQueue")) || [
      { name: "–ú–µ–¥–∏—Ç–∞—Ü–∏—è", quests: ["5 –º–∏–Ω—É—Ç –º–µ–¥–∏—Ç–∞—Ü–∏–∏", "10 –º–∏–Ω—É—Ç –º–µ–¥–∏—Ç–∞—Ü–∏–∏"] },
      { name: "–§–∏–∑.—É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è", quests: ["10 –ø—Ä–∏—Å–µ–¥–∞–Ω–∏–π", "10 –æ—Ç–∂–∏–º–∞–Ω–∏–π"] },
      { name: "–ò–∑—É—á–µ–Ω–∏–µ —è–∑—ã–∫–∞", quests: ["–í—ã—É—á–∏ 5 –Ω–æ–≤—ã—Ö —Å–ª–æ–≤", "–ü–æ–≤—Ç–æ—Ä–∏ —Å–ª–æ–≤–∞ 10 –º–∏–Ω—É—Ç"] }
    ];
    let currentDay = parseInt(localStorage.getItem("currentDay")) || 0;
    let questIndex = parseInt(localStorage.getItem("questIndex")) || 0;
    let lastCompletedDate = localStorage.getItem("lastCompletedDate") || null;

    // ====== UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ======
    function updateStatsUI() {
      let xpNeeded = level * 50;
      document.getElementById("level").textContent = level;
      document.getElementById("xp").textContent = xp;
      document.getElementById("xpNeeded").textContent = xpNeeded;

      let percent = Math.min(100, (xp / xpNeeded) * 100);
      document.getElementById("xp-bar").style.width = percent + "%";

      document.getElementById("strength").textContent = stats.strength;
      document.getElementById("agility").textContent = stats.agility;
      document.getElementById("intelligence").textContent = stats.intelligence;
      document.getElementById("vitality").textContent = stats.vitality;
    }

    // ====== –û–ø—ã—Ç ======
    function gainXP(amount) {
      xp += amount;
      let xpNeeded = level * 50;

      if (xp >= xpNeeded) {
        xp -= xpNeeded;
        level++;

        let keys = Object.keys(stats);
        let randomKey = keys[Math.floor(Math.random() * keys.length)];
        let bonus = Math.floor(Math.random() * 3) + 1;
        stats[randomKey] += bonus;

        alert(`üéâ –£—Ä–æ–≤–µ–Ω—å ${level}! +${bonus} –∫ ${translateStat(randomKey)}.`);
      }

      saveProgress();
      updateStatsUI();
    }

    function translateStat(statKey) {
      switch (statKey) {
        case "strength": return "–°–∏–ª–µ";
        case "agility": return "–õ–æ–≤–∫–æ—Å—Ç–∏";
        case "intelligence": return "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É";
        case "vitality": return "–ñ–∏–≤—É—á–µ—Å—Ç–∏";
      }
    }

    // ====== –ó–∞–¥–∞–Ω–∏—è ======
    function isNewDay() {
      const today = new Date().toDateString();
      return lastCompletedDate !== today;
    }

    function renderQuest() {
      if (skillsQueue.length === 0) {
        document.getElementById("daily-quest").innerHTML = "–ù–µ—Ç –Ω–∞–≤—ã–∫–æ–≤ –∏ –∑–∞–¥–∞–Ω–∏–π!";
        document.getElementById("complete-btn").style.display = "none";
        return;
      }

      let skill = skillsQueue[currentDay % skillsQueue.length];
      let quest = skill.quests[questIndex % skill.quests.length];

      document.getElementById("daily-quest").innerHTML =
        `<b>–ù–∞–≤—ã–∫:</b> ${skill.name}<br><b>–ó–∞–¥–∞–Ω–∏–µ:</b> ${quest}`;

      if (isNewDay()) {
        document.getElementById("complete-btn").style.display = "inline-block";
      } else {
        document.getElementById("complete-btn").style.display = "none";
        document.getElementById("daily-quest").innerHTML +=
          "<br><i>–ö–≤–µ—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω. –°–ª–µ–¥—É—é—â–∏–π –±—É–¥–µ—Ç –∑–∞–≤—Ç—Ä–∞!</i>";
      }
    }

    function completeQuest() {
      alert("–ö–≤–µ—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω! +10 XP üéâ");
      gainXP(10);

      lastCompletedDate = new Date().toDateString();
      localStorage.setItem("lastCompletedDate", lastCompletedDate);

      questIndex++;
      if (questIndex >= skillsQueue[currentDay % skillsQueue.length].quests.length) {
        questIndex = 0;
        currentDay++;
      }

      saveProgress();
      renderQuest();
    }

    // ====== –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ======
    function saveProgress() {
      localStorage.setItem("level", level);
      localStorage.setItem("xp", xp);
      localStorage.setItem("stats", JSON.stringify(stats));
      localStorage.setItem("skillsQueue", JSON.stringify(skillsQueue));
      localStorage.setItem("currentDay", currentDay);
      localStorage.setItem("questIndex", questIndex);
    }

    // ====== –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü ======
    function showPage(id) {
      document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    // ====== –ó–∞–ø—É—Å–∫ ======
    updateStatsUI();
    renderQuest();
  </script>
</body>
</html>
